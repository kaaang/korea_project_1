<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<style>
    #wrapper{
        width: 1400px;
        height: 800px;
        background-color: antiquewhite;
        margin: auto;
    }


    #info{
        width: 1400px;
        height: 50px;
        background-color: aquamarine;
        font-size: 25px;
        text-align: center;
        font-weight: bold;
    }
    #info_status{
        width: 1200px;
        height: 50px;
        background-color: burlywood;
        float: left;
    }
    #info_coin{
        width: 200px;
        height: 50px;
        background-color: cadetblue;
        float: left;
    }


    #content{
        width: 1400px;
        height: 600px;
        background-color:coral;
        position: relative;
        background: url(../img/bg.jpg);
        background-size: 1400px 600px;
    }


    #user{
        width: 1400px;
        height: 150px;
        background-color: cornflowerblue;
    }
    #user_click{
        width: 200px;
        height: 150px;
        background-color: cornsilk;
        float: left;
    }
    #user_hero{
        width: 1000px;
        height: 150px;
        background-color: darkgreen;
        float: left;
    }
    #user_etc{
        width: 200px;
        height: 150px;
        background-color: darkgrey;
        float: left;
    }

    #user_hero div{
        width: 200px;
        height: 150px;
        box-sizing: border-box;
        border: 3px solid black;
        float: left;
    }

    #hero1{
        background-image: url(../img/c/hero1.png);       
        background-repeat: no-repeat;
        background-position: -1150px -96px;

        /* 사이즈 조정하는법 찾아야함 */
    }
</style>


<script src="../js/lib.js"></script>
<script src="../js/GameObj.js"></script>
<script src="../js/Castle.js"></script>

<script src="../js/CharacterObj.js"></script>
<script src="../js/Hero.js"></script>
<script src="../js/Ene.js"></script>
<script src="../js/Coin.js"></script>
<script>

    var content;
    var info_coin;



    var hero1_move=[
        {pos:"-10px -443px",width:"43px",height:"42px"},
        {pos:"-74px -446px",width:"46px",height:"39px"},
        {pos:"-141px -443px",width:"43px",height:"42px"},
        {pos:"-205px -442px",width:"36px",height:"43px"},
        {pos:"-269px -444px",width:"43px",height:"41px"},
        {pos:"-336px -446px",width:"46px",height:"39px"},
        {pos:"-407px -444px",width:"43px",height:"41px"},
        {pos:"-477px -443px",width:"36px",height:"42px"}
    ];
    var hero1_attack=[
        {pos:"-10px -279px",width:"50px",height:"28px"},
        {pos:"-80px -268px",width:"39px",height:"40px"},
        {pos:"-147px -257px",width:"52px",height:"51px"},
        {pos:"-225px -264px",width:"46px",height:"43px"},
        {pos:"-294px -263px",width:"42px",height:"44px"},
        {pos:"-358px -256px",width:"51px",height:"51px"},
        {pos:"-427px -263px",width:"46px",height:"44px"},
        {pos:"-491px -256px",width:"51px",height:"51px"},
        {pos:"-558px -263px",width:"42px",height:"45px"}
    ];



    var hero2_move=[
        {pos:"-22px -14px",width:"53px",height:"84px"},
        {pos:"-96px -4px",width:"65px",height:"94px"},
        {pos:"-174px -16p",width:"76px",height:"82px"},
        {pos:"-274px -14px",width:"55px",height:"84px"},
        {pos:"-350px -5px",width:"61px",height:"93px"},
        {pos:"-428px -18px",width:"72px",height:"80px"}
    ];
    var hero2_attack=[
        {pos:"-12px -340px",width:"65px",height:"84px"},
        {pos:"-83px -330px",width:"75px",height:"94px"},
        {pos:"-163px -342px",width:"76px",height:"82px"},
        {pos:"-257px -340px",width:"65px",height:"84px"},
        {pos:"-341px -331px",width:"73px",height:"93px"},
        {pos:"-426px -344px",width:"77px",height:"80px"}
    ];




    var hero3_move=[
        {pos:"-103px -33px",width:"136px",height:"147px"},
        {pos:"-103px -33px",width:"136px",height:"147px"},
        {pos:"-103px -33px",width:"136px",height:"147px"},
        {pos:"-255px -3px",width:"134px",height:"147px"},
        {pos:"-255px -3px",width:"134px",height:"147px"},
        {pos:"-255px -3px",width:"134px",height:"147px"},
        {pos:"-408px -24px",width:"129px",height:"155px"},
        {pos:"-408px -24px",width:"129px",height:"155px"},
        {pos:"-408px -24px",width:"129px",height:"155px"}
    ];
    var hero3_attack=[
        {pos:"-22px -202px",width:"129px",height:"176px"},
        {pos:"-22px -202px",width:"129px",height:"176px"},
        {pos:"-22px -202px",width:"129px",height:"176px"},
        {pos:"-161px -226px",width:"151px",height:"152px"},
        {pos:"-161px -226px",width:"151px",height:"152px"},
        {pos:"-161px -226px",width:"151px",height:"152px"},
        {pos:"-322px -217px",width:"128px",height:"160px"},
        {pos:"-322px -217px",width:"128px",height:"160px"},
        {pos:"-322px -217px",width:"128px",height:"160px"}
    ];





    var hero4_move=[
        {pos:"0px -256px",width:"80px",height:"116px"},
        {pos:"-92px -256px",width:"91px",height:"116px"},
        {pos:"-197px -258px",width:"100px",height:"113px"},
        {pos:"-311px -255px",width:"91px",height:"116px"},
        {pos:"-415px -255px",width:"81px",height:"116px"},
        {pos:"-517px -255px",width:"81px",height:"116px"},
        {pos:"-608px -255px",width:"91px",height:"116px"},
        {pos:"-705px -258px",width:"100px",height:"113px"},
        {pos:"-810px -255px",width:"90px",height:"116px"}
    ];
    var hero4_attack=[
        {pos:"0px -380px",width:"59px",height:"61px"},
        {pos:"-72px -381px",width:"61px",height:"60px"},
        {pos:"-148px -381px",width:"59px",height:"61px"},
        {pos:"-225px -381px",width:"61px",height:"60px"},
        {pos:"-303px -381px",width:"97px",height:"60px"},
        {pos:"-414px -381px",width:"98px",height:"61px"},
        {pos:"-522px -381px",width:"98px",height:"61px"}
    ];


    var hero5_move=[
        {pos:"-132px -333px",width:"119px",height:"52px"},
        {pos:"-132px -333px",width:"119px",height:"52px"},
        {pos:"-180px -587px",width:"108px",height:"73px"},
        {pos:"-180px -587px",width:"108px",height:"73px"},
        {pos:"-496px -314px",width:"110px",height:"71px"},
        {pos:"-496px -314px",width:"110px",height:"71px"},
        {pos:"-611px -294px",width:"90px",height:"91px"},
        {pos:"-611px -294px",width:"90px",height:"91px"},
        {pos:"-706px -334px",width:"109px",height:"51px"},
        {pos:"-706px -334px",width:"109px",height:"51px"}
    ];
    var hero5_attack=[
        {pos:"-113px -455px",width:"80px",height:"90px"},
        {pos:"-113px -455px",width:"80px",height:"90px"},
        {pos:"-198px -456px",width:"90px",height:"89px"},
        {pos:"-198px -456px",width:"90px",height:"89px"},
        {pos:"-293px -473px",width:"80px",height:"72px"},
        {pos:"-293px -473px",width:"80px",height:"72px"},
        {pos:"-389px -594px",width:"67px",height:"66px"},
        {pos:"-389px -594px",width:"67px",height:"66px"}
    ];







    var ene1_move=[
        {pos:"-14px -38px",width:"89px",height:"90px"},
        {pos:"-159px -37px",width:"65px",height:"91px"},
        {pos:"-284px -32px",width:"71px",height:"96px"},
        {pos:"-398px -42px",width:"100px",height:"86px"}
    ];
    var ene2_move=[
        {pos:"-13px -147px",width:"101px",height:"109px"},
        {pos:"-149px -140px",width:"85px",height:"116px"},
        {pos:"-256px -144px",width:"98px",height:"112px"},
        {pos:"-384px -151px",width:"101px",height:"105px"}
    ];
    var ene3_move=[
        {pos:"-13px -264px",width:"95px",height:"120px"},
        {pos:"-138px -271px",width:"86px",height:"112px"},
        {pos:"-260px -268px",width:"92px",height:"116px"},
        {pos:"-388px -271px",width:"110px",height:"113px"}
    ];
    var ene4_move=[
        {pos:"-43px -391px",width:"51px",height:"121px"},
        {pos:"-177px -384px",width:"51px",height:"115px"},
        {pos:"-302px -399px",width:"58px",height:"113px"},
        {pos:"-426px -392px",width:"54px",height:"120px"}
    ];


    var coin_move=[
        {pos:"0px 0px", width:"84px", height: "84px"},
        {pos:"-93px 0px", width:"66px", height: "84px"},
        {pos:"-185px 0px", width:"50px", height: "84px"},
        {pos:"-286px 0px", width:"15px", height: "84px"},
        {pos:"-353px 0px", width:"50px", height: "84px"},
        {pos:"-429px 0px", width:"66px", height: "84px"}

    ];
    







    var coin=0;
    var coin_cnt=0;

    var my_castle;
    var ene_castle;

    var heroArr=[];

    var eneArr=[];
    var ene_cnt=0;

    var flag = true;


    function init(){
        content = document.getElementById("content");
        info_coin = document.getElementById("info_coin");
        
        createCoin();
        createCastle();
        appendCoin();

        //임시 적군 소환
        createEne(ene1_move);

        document.body.addEventListener("keydown", function(){
            pressDown();
        });
    
        document.body.addEventListener("keyup", function(){
            pressUp();
        });
    }

    function pressDown(){
        switch(event.keyCode){
            case 49:
            case 97:
                createHero("../img/c/hero1.png",1,hero1_move,hero1_attack);
                break;
            case 50:
            case 98:
                createHero("../img/c/hero2.png",2,hero2_move,hero2_attack);
                break;
            case 51:
            case 99:
                createHero("../img/c/hero3.png",3,hero3_move,hero3_attack);
                break;
            case 52:
            case 100:
                createHero("../img/c/hero4.png",4,hero4_move,hero4_attack);
                break;
            case 53:
            case 101:
                createHero("../img/c/hero5.png",5,hero5_move,hero5_attack);
                break;
        }
    }

    function pressUp(){
        switch(event.keyCode){
            case 32:
                coin++;
                turn_coin.tick();
                turn_coin.render();
                createCoin();
                break;
        }
    }





    function createCoin(){
        info_coin.innerText = "COIN : " +coin;
    }

    function appendCoin(){
        //container, src, x, y, move
        // constructor(container, src, width, height, x, y, move){
        turn_coin=new Coin(user_click,"../img/c/coin3.png",100,100,630,690,coin_move);
    } 


    function createCastle(){
        //container, src, width, height, x, y, velX, velY, hp, attack
        my_castle = new Castle(content,"../img/my_tower.png",150,450,0,150,0,0,10);
        ene_castle = new Castle(content,"../img/ene_tower.png",150,450,1250,150,0,0,10);
    }





    function createHero(src,heroNum,move,attack){
        switch(heroNum){
            case 1:
                var hero = new Hero(content,src,150,590,2,0,3,move,attack);
                heroArr.push(hero);
                break;
            case 2:
                var hero = new Hero(content,src,150,590,2,0,3,move,attack);
                heroArr.push(hero);
                break;
            case 3:
                var hero = new Hero(content,src,150,590,2,0,3,move,attack);
                heroArr.push(hero);
                break;
            case 4:
                var hero = new Hero(content,src,150,590,2,0,3,move,attack);
                heroArr.push(hero);
                break;
            case 5:
                var hero = new Hero(content,src,150,590,2,0,3,move,attack);
                heroArr.push(hero);
                break;
        }
    }

    function createEne(move){
        // constructor(container, src, x, y, velX, velY, hp,move,attack)
        var ene = new Ene(content,"../img/c/ene.png",1200,590,2,0,7,move,move);
        eneArr.push(ene);
    }


























    function gameLoop(){
        coin_cnt++;
        if(coin_cnt%10 == 0){
            coin++
            createCoin();
        }

        if(heroArr.length>0){
            for(var i=0;i<heroArr.length;i++){
                heroArr[i].render();
                heroArr[i].tick();
            }
        }

        //임시 tick
        if(eneArr.length>0){
            for(var i=0;i<eneArr.length;i++){
                eneArr[i].render();
                eneArr[i].tick();
            }
        }




        // ene_cnt++;
        // if(ene_cnt%150 == 0 && flag){
        //     createEne(ene1_move);
        //     flag=false;
        // }
    }

    
    
    window.addEventListener("load",function(){
        init();
        setInterval("gameLoop()",100);
    });
</script>

</head>
<body>
    <div id="wrapper">
        <div id="info">
            <div id="info_status"></div>
            <div id="info_coin"></div>
        </div>
        <div id="content"></div>
        <div id="user">
            <div id="user_click"></div>
            <div id="user_hero">
                <div id="hero1"></div>
                <div id="hero2"></div>
                <div id="hero3"></div>
                <div id="hero4"></div>
                <div id="hero5"></div>
            </div>
            <div id="user_etc"></div>
        </div>
    </div>
</body>
</html>