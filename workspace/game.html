<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<style>
    #wrapper{
        width: 1800px;
        height: 800px;
        position: relative;
        overflow: hidden;
        margin: auto;
        background-color: blanchedalmond;
    }
    #info{
        width: 100%;
        height: 50px;
        background-color: darkcyan;
    }
    #coin{
        width: 150px;
        height: 50px;
        background-color: bisque;
        position: absolute;
        right: 0px;
    }
    #content{
        width: 100%;
        height: 600px;
        background-color: darkgray;
        position: relative;
    }
    #hero{
        width: 100%;
        height: 150px;
        background-color: darkolivegreen;
        position: relative;
    }

    #hero_left{
        width: 400px;
        height: 100%;
        background-color: darkseagreen;
        float: left;
    }
    #hero_center{
        width: 1000px;
        height: 100%;
        background-color:dodgerblue;
        float: left;
    }
    #hero_right{
        width: 400px;
        height: 100%;
        background-color: dimgray;
        float: left;
    }
    
</style>


<script src="../js/lib.js"></script>
<script src="../js/Obj.js"></script>
<script src="../js/Bg.js"></script>
<script src="../js/Castle.js"></script>
<script src="../js/Coin.js"></script>
<script src="../js/Hero.js"></script>
<script src="../js/ShowHero.js"></script>
<script src="../js/Ene.js"></script>
<script>
    var wrapper;
    var info;
    var content;
    var hero;
    var hero_left;
    var hero_center;
    var hero_right;

    
    var imgArr=["ball1.png","ball2.png","ball3.png","ball4.png","ball5.png"];
    var heroArr=[];
    var heroShow;
    var heroShowArr=[];
    
    
    var coin=0;
    var cnt =0;


    var ene;
    var eneX = 10;


    function init(){
        wrapper = document.getElementById("wrapper");
        info = document.getElementById("info");
        content = document.getElementById("content");
        hero = document.getElementById("hero");
        hero_left = document.getElementById("hero_left");
        hero_center = document.getElementById("hero_center");
        hero_right = document.getElementById("hero_right");

        createBg();
        createCastle();
        createCoin();
        createHero();
        showCoin();
        createEne();

        document.body.addEventListener("keydown", function(){
            pressDown();
        });
    
        document.body.addEventListener("keyup", function(){
            pressUp();
        });

    }
    // 49~53
    // 97~101
    function pressDown(){
        switch(event.keyCode){
            // case 32:
            //     coin++;
            //     showCoin();
            //     break;
            case 49:
            case 97:
                hero_show("ball1.png",1);
                break;
            case 50:
            case 98:
                hero_show("ball2.png",2);
                break;
            case 51:
            case 99:
                hero_show("ball3.png",3);
                break;
            case 52:
            case 100:
                hero_show("ball4.png",4);
                break;
            case 53:
            case 101:
                hero_show("ball5.png",5);
                break;
        }
    }
    function pressUp(){
        switch(event.keyCode){
            case 32:
                coin++;
                showCoin();
                break;
        }
    }



    function createBg(){
        var bg=new Bg(content, "../img/BG.png", 1800, 600, 0, 0, 0, 0);
    }
    function createCastle(){
        var castle = new Castle(content,"../img/Objects/StoneBlock.png",100,500,0,100,0,0);
        var castle2 = new Castle(content,"../img/Objects/StoneBlock.png",100,500,1700,100,0,0);
    }
    function createCoin(){
        var coin = new Coin(hero_left,"../img/Objects/Crate.png",350,100,25,25,0,0);
    }
    function createHero(){
        for(var i=0;i<5;i++){
            var hero = new Hero(hero_left,"../img/ball/"+imgArr[i],200,150,400+(i*200),0,0,0);
            heroArr.push(hero);
        }
    }
    function showCoin(){
        var div = document.getElementById("coin");
        div.innerText = "COIN : "+coin;
    }

    function createEne(){
        ene = new Ene(content,"../img/card/5.png",100,100,1600,500,eneX,0,5);
    }










    function hero_show(src, heroNum){
        if(heroNum == 1){
            if(coin >= 10){
                coin -=10;
                heroShow = new ShowHero(content,"../img/ball/"+src,100,100,100,500,10,0,3);
                heroShowArr.push(heroShow);
            }
        }else if(heroNum ==2){
            if(coin >= 20){
                coin -=20;
                heroShow = new ShowHero(content,"../img/ball/"+src,100,100,100,500,10,0,4);
                heroShowArr.push(heroShow);
            }
        }else if(heroNum ==3){
            if(coin >= 30){
                coin -=30;
                heroShow = new ShowHero(content,"../img/ball/"+src,100,100,100,500,10,0,5);
                heroShowArr.push(heroShow);
            }
        }else if(heroNum ==4){
            if(coin >= 40){
                coin -=40;
                heroShow = new ShowHero(content,"../img/ball/"+src,100,100,100,500,10,0,6);
                heroShowArr.push(heroShow);
            }
        }else if(heroNum ==5){
            if(coin >= 50){
                coin -=50;
                heroShow = new ShowHero(content,"../img/ball/"+src,100,100,100,500,10,0,7);
                heroShowArr.push(heroShow);
            }
        }

        
        // heroShowArr.push(heroShow);
        console.log(heroShowArr);
    }


    

    function gameLoop(){
        cnt++;
        if(heroShowArr.length>0){
            heroShow.tick();
            heroShow.render();
        }

        ene.tick();
        ene.render();
        
        
        if((cnt%10) == 0){
            coin++;
            showCoin();
        }
    }


    window.addEventListener("load",function(){
        init();
        setInterval("gameLoop()",100);
    });
</script>

</head>
<body>
    <div id="wrapper">
        <div id="info">
            <div id="coin"></div>
        </div>
        <div id="content"></div>
        <div id="hero">
            <div id="hero_left"></div>
            <div id="hero_center"></div>
            <div id="hero_right"></div>
        </div>
    </div>
</body>
</html>